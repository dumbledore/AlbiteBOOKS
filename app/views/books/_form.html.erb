<% freebase_suggest 'book_title', 'book_freebase_uid', '/book/book', "\"/book/written_work/author\": \"#{h(@book.author.name)}\"".html_safe %>
<% focus_on_load('book_title') %>
<% form_for @book do |f| %>
<!--form_for @post, :as => :post, :url => post_path(@post), :html => { :method => :put, :class => "edit_post", :id => "edit_post_45" }-->
  <%= f.error_messages %>
  <% content_tag :fieldset do %>
    <%= content_tag :legend, "General info" %>
    <%= f.label :author %>
    <%= f.text_field :author, :value => @book.author.name, :disabled => 1 %>
    <%= f.hidden_field :author_id %><!-- this one is important -->

    <%= f.label :title %>
    <%= f.text_field :title %>
    <%= f.label :freebase_uid, "Freebase ID" %>
    <%= f.text_field :freebase_uid %>
    <%= f.label :thumbnail_url %>
    <%= f.text_field :thumbnail_url %>
  <% end %>

  <% content_tag :fieldset do %>
    <%= content_tag  :legend, 'Freebase info (used only in mobile version)' %>
    <%= f.label      :description %>
    <%= f.text_area  :description %>
    <%= f.label      :date_of_first_publication %>
    <%= f.text_field :date_of_first_publication %>
    <%= f.label      :original_language %>
    <%= f.text_field :original_language %>
    <%= f.label      :number_of_pages %>
    <%= f.text_field :number_of_pages %>
  <% end %>

  <% content_tag :fieldset do %>
    <%= content_tag :legend, "Tags" %>
    <%= f.label :genres %>
    <%= f.text_area :genre_list %>
    <%= f.label :subjects %>
    <%= f.text_area :subject_list %>
  <% end %>

  <% content_tag :fieldset do %>
      <%= content_tag :legend, "Readiness" %>
    <%= f.check_box :ready %> Show in website
  <% end %>
  <%= f.submit "Submit", :disable_with => "Please wait..." %>
<% end %>